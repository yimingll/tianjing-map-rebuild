# 天京城地图重构实施说明

## ⚠️ 重要提示

完整重构140个房间是一项庞大的工程。考虑到:
1. 每个房间需要定义: ID、名称、描述、出口、坐标、NPC、属性等
2. 所有房间的连接需要双向对称
3. 需要大量的测试验证

**建议工作量评估**:
- 手动重构: 约40-60小时
- 半自动化: 约20-30小时
- 全自动化: 约10-15小时(含开发脚本)

## 🔧 推荐的实施方式

### 方案A: 使用生成脚本 (推荐)

创建一个Node.js脚本,根据设计文档自动生成JSON:

```javascript
// generate-map.js
const fs = require('fs');

// 从设计文档读取房间定义
const rooms = {
  imperial_district: [
    { id: 'tj_palace_square', name: '宫前广场', x: 500, y: 575, ... },
    //... 25个房间
  ],
  commercial_district: [
    //... 15个房间
  ],
  // ... 其他区域
};

// 自动生成连接
function generateConnections(rooms) {
  // 根据坐标自动计算相邻关系
  // 添加设计文档中定义的跨区域连接
}

// 生成JSON文件
function generateJSON() {
  // 按照原有格式生成part1, part2, part3
}
```

### 方案B: 分阶段手动重构

**阶段1**: 先重构核心枢纽房间(宫前广场、六部广场等)
**阶段2**: 重构主要街道(长安街、御街等)
**阶段3**: 填充各区域内部房间
**阶段4**: 添加连接和测试

### 方案C: AI辅助生成

使用AI工具根据设计文档批量生成房间定义,然后人工审核调整。

## 📝 当前状态

- ✅ 设计文档已完成
- ✅ 原始文件已备份
- ⏸️ 等待确认实施方案

## 💡 我的建议

鉴于工作量巨大,我建议:

### 选项1: 先实施小范围试点
重构1-2个区域(如南门区、商业区),测试效果后再决定是否全面重构

### 选项2: 保留当前结构,仅优化连接
- 保持现有140个房间不变
- 仅增加关键的跨区域连接
- 优化坐标布局
- 工作量降低80%

### 选项3: 分批次逐步重构
- 第一批: 重构外围区域(四门区、城墙区) - 30房间
- 第二批: 重构功能区域(商业、官府等) - 62房间
- 第三批: 重构核心区域(皇城) - 25房间
- 保留特色区域不变(东城白家老宅等) - 23房间

## 🚀 下一步行动

请告诉我您选择哪个方案,或者:
1. 如果选择全量重构,我可以开始创建生成脚本
2. 如果选择试点,我们先重构1-2个区域
3. 如果选择优化连接,我们保留房间仅调整连接关系

您的选择?
