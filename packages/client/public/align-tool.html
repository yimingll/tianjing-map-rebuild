<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¯¹é½å·¥å…· - Sarasa Term SC Nerd</title>
  <style>
    @font-face {
      font-family: 'Sarasa Term SC Nerd';
      src: url('/fonts/SarasaTermSCNerd-Regular.ttf') format('truetype');
      font-weight: 400;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: 'Sarasa Term SC Nerd', monospace;
      background: #1a1a1a;
      color: #e0e0e0;
      font-size: 14px;
      line-height: 1.2;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      color: #4CAF50;
    }

    .editor-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    textarea {
      width: 100%;
      height: 600px;
      font-family: 'Sarasa Term SC Nerd', monospace;
      font-size: 14px;
      line-height: 1.2;
      background: #2a2a2a;
      color: #e0e0e0;
      border: 1px solid #3a3a3a;
      padding: 10px;
      border-radius: 4px;
      resize: vertical;
    }

    .preview {
      white-space: pre;
      background: #2a2a2a;
      padding: 10px;
      border: 1px solid #3a3a3a;
      border-radius: 4px;
      overflow-x: auto;
      height: 600px;
      overflow-y: auto;
    }

    .ruler {
      white-space: pre;
      color: #666;
      font-size: 12px;
      margin-bottom: 10px;
      background: #1e1e1e;
      padding: 5px;
      border-radius: 4px;
    }

    .controls {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-family: inherit;
    }

    button:hover {
      background: #45a049;
    }

    button.secondary {
      background: #2196F3;
    }

    button.secondary:hover {
      background: #0b7dda;
    }

    .stats {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 4px;
      margin-top: 20px;
    }

    .stats h3 {
      margin-top: 0;
      color: #64B5F6;
    }

    .line-info {
      font-size: 12px;
      color: #999;
      margin-top: 5px;
    }

    .error-line {
      background-color: rgba(244, 67, 54, 0.1);
    }

    .good-line {
      background-color: rgba(76, 175, 80, 0.05);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ å¯¹é½å·¥å…· - Sarasa Term SC Nerd å­—ä½“</h1>

    <div class="ruler">0----+----1----+----2----+----3----+----4----+----5----+----6----+----7----+</div>

    <div class="controls">
      <button onclick="updatePreview()">ğŸ”„ æ›´æ–°é¢„è§ˆ</button>
      <button class="secondary" onclick="copyToClipboard()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
      <button class="secondary" onclick="loadSample()">ğŸ“ åŠ è½½ç¤ºä¾‹</button>
      <button class="secondary" onclick="autoAlign()">âœ¨ è‡ªåŠ¨å¯¹é½ (å®éªŒæ€§)</button>
    </div>

    <div class="editor-container">
      <div>
        <h3>ç¼–è¾‘åŒº</h3>
        <textarea id="editor" oninput="updatePreview()">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘         â•”â•â•â•â•—                                          â•”â•â•â•â•—         â•‘
â•‘         â•‘ âœ¦ â•‘          X I U X I A N    M U D          â•‘ âœ¦ â•‘         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</textarea>
      </div>

      <div>
        <h3>é¢„è§ˆåŒº</h3>
        <div class="preview" id="preview"></div>
      </div>
    </div>

    <div class="stats" id="stats"></div>
  </div>

  <script>
    let canvas, ctx;

    function init() {
      canvas = document.createElement('canvas');
      ctx = canvas.getContext('2d');
      ctx.font = '14px "Sarasa Term SC Nerd"';

      // ç­‰å¾…å­—ä½“åŠ è½½
      document.fonts.ready.then(() => {
        updatePreview();
      });
    }

    function measureWidth(text) {
      return ctx.measureText(text).width;
    }

    function updatePreview() {
      const editor = document.getElementById('editor');
      const preview = document.getElementById('preview');
      const stats = document.getElementById('stats');

      const lines = editor.value.split('\n');
      let html = '';
      let statsHtml = '<h3>è¡Œå®½åº¦ç»Ÿè®¡</h3>';
      let totalErrors = 0;

      // æµ‹é‡ç¬¬ä¸€è¡Œä½œä¸ºåŸºå‡†
      const firstLineWidth = measureWidth(lines[0]);
      const targetWidth = firstLineWidth;

      lines.forEach((line, index) => {
        const width = measureWidth(line);
        const diff = width - targetWidth;
        const isGood = Math.abs(diff) < 1; // å…è®¸1åƒç´ è¯¯å·®

        let lineClass = isGood ? 'good-line' : 'error-line';
        html += `<span class="${lineClass}">${escapeHtml(line)}</span>\n`;

        let status = isGood ? 'âœ…' : 'âŒ';
        if (!isGood) totalErrors++;

        statsHtml += `<div>ç¬¬ ${index + 1} è¡Œ: ${status} å®½åº¦ ${width.toFixed(2)}px (å·®å€¼: ${diff > 0 ? '+' : ''}${diff.toFixed(2)}px)</div>`;
      });

      preview.innerHTML = html;
      statsHtml += `<div style="margin-top:15px; padding-top:15px; border-top:1px solid #3a3a3a;">`;
      statsHtml += `æ€»è¡Œæ•°: ${lines.length} | å¯¹é½: ${lines.length - totalErrors} | æœªå¯¹é½: ${totalErrors}`;
      statsHtml += `</div>`;
      stats.innerHTML = statsHtml;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function loadSample() {
      const sample = `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘         â•”â•â•â•â•—                                          â•”â•â•â•â•—         â•‘
â•‘         â•‘   â•‘==========================================â•‘   â•‘         â•‘
â•‘         â•‘   â•‘                                          â•‘   â•‘         â•‘
â•‘         â•‘ âœ¦ â•‘          X I U X I A N    M U D          â•‘ âœ¦ â•‘         â•‘
â•‘         â•‘   â•‘                                          â•‘   â•‘         â•‘
â•‘         â•‘   â•‘          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”          â•‘   â•‘         â•‘
â•‘         â•‘   â•‘             ã€Š ç„ é‰´ ä»™ å½• ã€‹            â•‘   â•‘         â•‘
â•‘         â•‘   â•‘          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”          â•‘   â•‘         â•‘
â•‘         â•‘   â•‘                                          â•‘   â•‘         â•‘
â•‘         â•‘   â•‘     Xuanjian Chronicles of Immortals     â•‘   â•‘         â•‘
â•‘         â•‘   â•‘                                          â•‘   â•‘         â•‘
â•‘         â•‘   â•‘==========================================â•‘   â•‘         â•‘
â•‘         â•šâ•â•â•â•                                          â•šâ•â•â•â•         â•‘
â•‘                                                                      â•‘
â•‘           âœ¿~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~âœ¿               â•‘
â•‘                                                                      â•‘
â•‘                       "ä»¥ç„é‰´ä¹‹çœ¼,è§‚ä¸‡ä¸–æ²‰æµ®"                        â•‘
â•‘                       "ä»¥ä»™å½•ä¹‹ç¬”,ä¹¦åƒç§‹ä¼ å¥‡"                        â•‘
â•‘                                                                      â•‘
â•‘           âœ¿~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~âœ¿               â•‘
â•‘                                                                      â•‘
â•‘    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â•‘
â•‘    â•‘                                                              â•‘  â•‘
â•‘    â•‘                          ã€å·é¦–è¯­ã€‘                          â•‘  â•‘
â•‘    â•‘                                                              â•‘  â•‘
â•‘    â•‘          å¤©åœ°åˆå¼€,é¸¿è’™æœªåˆ¤,ä¸Šå¤ä»™äººç‚¼åˆ¶ç„é‰´å®é•œ,          â•‘  â•‘
â•‘    â•‘              å¯ç…§çœŸä¼ª,è¾¨å–„æ¶,å¯Ÿå¤©æœº,æ‚Ÿå¤§é“ã€‚              â•‘  â•‘
â•‘    â•‘                                                              â•‘  â•‘
â•‘    â•‘            å²æœˆæµè½¬,çµæ°”å¤è‹,ä¿®çœŸç››ä¸–å†ä¸´äººé—´ã€‚            â•‘  â•‘
â•‘    â•‘           æ— æ•°ä¿®å£«è¸ä¸Šæ±‚é“ä¹‹è·¯,äºè¿™ä»™å½•ä¹‹ä¸­ç•™åã€‚          â•‘  â•‘
â•‘    â•‘                                                              â•‘  â•‘
â•‘    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;

      document.getElementById('editor').value = sample;
      updatePreview();
    }

    function autoAlign() {
      alert('è‡ªåŠ¨å¯¹é½åŠŸèƒ½å¼€å‘ä¸­...\nè¯·æ‰‹åŠ¨è°ƒæ•´æ¯è¡Œæœ«å°¾çš„ç©ºæ ¼æ•°é‡ä»¥å¯¹é½');
    }

    function copyToClipboard() {
      const editor = document.getElementById('editor');
      editor.select();
      document.execCommand('copy');
      alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
    }

    // åˆå§‹åŒ–
    window.addEventListener('load', init);
  </script>
</body>
</html>
