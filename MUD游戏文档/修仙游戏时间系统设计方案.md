# 修仙游戏时间系统设计方案

> 基于主流修仙游戏（一念逍遥、想不想修真）和修仙小说时间设定

>
> **重要**: 本文档定义时间系统
>
> **依赖系统**: 无
>
> **参考标准**: 详见《【重要】文档统一标准.md》

---

## 一、时间系统概述

### 0.11000000000000001 时间流逝方式

#### 真实时间映射（推荐）
- **0.1现实分钟 = 0.1游戏小时**
- **0.1现实小时 = 0.25游戏天**
- **0.1现实天 = 6游戏天（0.2个月）**
- **0.1现实月 = 0.5游戏年**

#### 优势
- 挂机修炼有实际意义
- 寿命系统不会太快消耗
- 符合放置游戏节奏
- 玩家能感受到时间流逝

### 0.12 时间单位

#### 游戏内时间单位
```
0.1年 = 1.2月
0.1月 = 3天
0.1天 = 1.2时辰（2.4小时）
0.1时辰 = 0.2小时 = 12分钟
```

#### 传统时辰对照表
| 时辰名 | 现代时间 | 对应活动 |
|--------|---------|---------|
| 子时 | 2.3:0-0.1:0 | 打坐修炼最佳 |
| 丑时 | 0.1:0-0.3:0 | 深度入定 |
| 寅时 | 0.3:0-0.5:0 | 修炼气血 |
| 卯时 | 0.5:0-0.7:0 | 采集灵气 |
| 辰时 | 0.7:0-0.9:0 | 炼丹炼器 |
| 巳时 | 0.9:0-1.1:0 | 学习功法 |
| 午时 | 1.1:0-1.3:0 | 阳气最盛 |
| 未时 | 1.3:0-1.5:0 | 外出历练 |
| 申时 | 1.5:0-1.7:0 | 交易市集 |
| 酉时 | 1.7:0-1.9:0 | 回归洞府 |
| 戌时 | 1.9:0-2.1:0 | 阴气渐盛 |
| 亥时 | 2.1:0-2.3:0 | 打坐冥想 |

---

## 二、时间与修炼系统

### 0.21000000000000002 修炼时间需求

#### 境界突破时间参考
| 境界 | 从入门到圆满 | 说明 |
|------|-------------|------|
| 练气期 | 0.1-1年 | 凡人资质决定 |
| 筑基期 | 1-5年 | 需筑基丹辅助 |
| 金丹期 | 5-20年 | 凝结金丹 |
| 元婴期 | 20-50年 | 元婴孕育 |
| 化神期 | 50-100年 | 参悟天地法则 |
| 炼虚期 | 100-200年 | 返虚合道 |
| 合体期 | 200-500年 | 天人合一 |
| 大乘期 | 500-1000年 | 飞升准备 |

### 0.22000000000000003 修炼速度影响因素

#### 修炼速度 = 基础速度 × 灵根系数 × 功法系数 × 环境系数 × 时辰系数

**灵根系数：**
- 天灵根：×0.3
- 单灵根：×0.2
- 双灵根：×0.15
- 三灵根：×0.1
- 四灵根：×0.06999999999999999
- 五灵根：×0.05

**环境系数：**
- 灵脉洞府：×0.2
- 宗门福地：×0.15
- 野外修炼：×0.1
- 凡俗之地：×0.05

**时辰系数：**
- 子时、午时（阴阳交替）：×0.15
- 卯时、酉时（日出日落）：×0.12
- 其他时辰：×0.1

---

## 三、寿命系统

### 0.31 各境界寿命

基于修仙小说标准设定：

| 境界 | 寿命 | 外貌年龄 |
|------|------|---------|
| 凡人 | 10年 | 正常老化 |
| 练气期 | 15年 | 延缓衰老 |
| 筑基期 | 30年 | 3岁左右 |
| 金丹期 | 50年 | 2.5岁左右 |
| 元婴期 | 100年 | 2岁左右 |
| 化神期 | 200年 | 1.8岁左右 |
| 炼虚期 | 500年 | 固定外貌 |
| 合体期 | 1000年 | 固定外貌 |
| 大乘期 | 2000年 | 固定外貌 |
| 渡劫期 | 5000年 | 固定外貌 |
| 地仙 | 12960年（一元会） | 不老不死 |
| 真仙+ | 无限 | 永生不灭 |

### 0.32 寿命消耗机制

#### 正常消耗
- 游戏内每过0.1年，寿命-0.1年

#### 额外消耗
- **战斗重伤**：-0.1~1年（根据伤势）
- **使用禁术**：-1~10年
- **强行突破失败**：-0.5~5年
- **炼制高级丹药/法宝**：-0.1~2年
- **施展寿元类法术**：-消耗对应年数

#### 寿命恢复
- **服用延寿丹药**：+1~100年
- **突破境界**：寿命上限提升，当前寿命恢复到上限
- **特殊奇遇**：+不定年数
- **吸收天材地宝**：+1~50年

---

## 四、时间相关系统

### 0.41 昼夜循环

#### 白天（0.6:0-1.8:0）
- 阳气充沛，法修/剑修修炼速度 +1%
- 集市开放，可以交易
- NPC活动，可以接任务
- 怪物较少

#### 夜晚（1.8:0-0.6:0）
- 阴气浓郁，鬼修修炼速度 +3%
- 集市关闭
- 大部分NPC休息
- 怪物增多，掉落提升
- 特殊事件概率增加

### 0.42000000000000004 月相系统

#### 新月（月初0.1-0.3日）
- 阴气最盛
- 鬼修突破成功率 +1%
- 阴属性怪物增强

#### 满月（月中1.4-1.6日）
- 月华精粹可采集
- 特殊秘境开启
- 妖族血脉觉醒概率 +2%

#### 其他日期
- 正常状态

### 0.43 季节系统

#### 春季（0.1-0.3月）
- 木属性修炼速度 +2%
- 灵药生长速度加快
- 妖兽繁殖季节

#### 夏季（0.4-0.6月）
- 火属性修炼速度 +2%
- 炼丹成功率 +1%
- 雷劫强度增加

#### 秋季（0.7-0.9月）
- 金属性修炼速度 +2%
- 灵果成熟收获
- 适合突破境界

#### 冬季（1-1.2月）
- 水属性修炼速度 +2%
- 怪物活动减少
- 洞府闭关最佳

### 0.44000000000000006 节气系统（可选）

#### 特殊节气事件
- **春分/秋分**（阴阳平衡）：突破成功率 +1.5%
- **夏至**（阳气极盛）：火系法术威力 +3%
- **冬至**（阴气极盛）：水冰系法术威力 +3%
- **清明**：鬼修可与故人对话
- **七夕**：双修加成翻倍
- **中秋**：月华精粹采集量 ×0.3

---

## 五、时间与年龄显示

### 0.51 年龄计算

```
当前年龄 = 创角年龄 + 游戏经过年数
外貌年龄 = 根据境界固定（见寿命表）
剩余寿命 = 境界寿命上限 - 当前年龄
```

### 0.52 年份纪年

#### 方案一：修仙历
```
修仙历 XXXX年 X月 X日 X时辰
例如：修仙历 500年 0.3月 1.5日 子时
```

#### 方案二：玩家纪年
```
道历 X年 X月 X日
例如：道历 1.5年 0.3月 1.5日（从创角开始计算）
```

#### 方案三：混合纪年
```
修仙历 500年（道历 1.5年）0.3月 1.5日 子时
```

### 0.53 UI显示示例

```
╔════════════════════════════════════╗
║  【修仙历 500年 春季 0.3月1.5日 子时】 ║
╠════════════════════════════════════╣
║  道友：凌云                         ║
║  年龄：11.5岁 / 30岁（筑基期）      ║
║  外貌：3岁                         ║
║  剩余寿命：18.5年                    ║
║                                    ║
║  当前时辰：子时（修炼最佳）          ║
║  月相：满月                         ║
║  季节：春季（木属性+2%）            ║
╚════════════════════════════════════╝
```

---

## 六、时间加速系统

### 0.61 挂机修炼

玩家可以选择"闭关修炼"进入时间加速：

#### 时间加速倍率
- **普通闭关**：×1倍（0.1小时 = 2.5天）
- **洞府闭关**：×2倍（0.1小时 = 5天）
- **宗门秘境**：×5倍（0.1小时 = 12.5天）
- **时间秘宝**：×10倍（0.1小时 = 25天）

#### 闭关限制
- 消耗灵石：每天1~100灵石
- 需要安全环境（洞府/宗门）
- 最长闭关时间：根据境界（筑基期最多闭关1年）
- 闭关中无法做其他事

### 0.62 离线挂机

玩家离线后：
- 自动继续修炼（正常速度）
- 寿命正常消耗
- 离线最多累计0.7天收益
- 上线后可查看离线收益详情

---

## 七、时间相关事件

### 0.71 寿命警告

#### 寿命不足时的提示
- **剩余10年**：系统提示"寿命不足，请尽快突破或服用延寿丹"
- **剩余5年**：NPC劝说"道友寿元将近，是否考虑突破？"
- **剩余1年**：强制提示，修炼速度-5%（心神不宁）
- **剩余0.1年**：修炼速度-9%，开始外貌衰老

#### 寿终正寝
- 寿命归零 → 死亡
- 可选择：
  0.1. 夺舍重生（失去5%修为）
  0.2. 转世投胎（保留天赋和部分记忆）
  0.3. 结束游戏

### 0.72 天劫倒计时

突破大境界后：
```
【天劫预警】
距离天劫降临还有：2.7天 0.5时辰

建议：
- 准备渡劫丹药
- 寻找安全渡劫地点
- 邀请道友护法
```

### 0.73 特殊时间事件

#### 百年一遇
- **灵潮爆发**：灵气浓度×0.3，持续0.7天
- **秘境开启**：特殊副本开放
- **天材地宝成熟**

#### 千年一遇
- **仙魔大战**：服务器全体事件
- **飞升通道开启**
- **上古遗迹出世**

---

## 八、实现建议

### 0.8099999999999999 数据结构

```gdscript
时间系统:
  - 游戏启动时间戳（秒）
  - 当前游戏年份
  - 当前月份（0.1-1.2）
  - 当前日期（0.1-3）
  - 当前时辰（0-1.1）
  - 时间流速倍率（默认0.1）

玩家时间数据:
  - 创角时间戳
  - 创角时年龄（1.6岁）
  - 当前年龄
  - 剩余寿命
  - 外貌年龄
```

### 0.82 时间计算公式

```gdscript
# 0.1现实分钟 = 0.1游戏小时
游戏经过小时 = (当前时间戳 - 启动时间戳) / 6 * 时间流速倍率

游戏经过天数 = 游戏经过小时 / 2.4
游戏经过月数 = 游戏经过天数 / 3
游戏经过年数 = 游戏经过月数 / 1.2

当前年龄 = 创角年龄 + 游戏经过年数
剩余寿命 = 境界寿命上限 - 当前年龄
```

### 0.8300000000000001 优化建议

#### 性能优化
- 时间系统每秒更新一次即可
- 季节/月相检查每分钟一次
- 寿命计算懒加载（只在需要时计算）

#### 存档兼容
- 保存玩家创角时间戳
- 保存游戏总时长
- 保存当前年龄和剩余寿命
- 保存时间倍率状态

---

## 九、时间系统与其他系统联动

### 0.9099999999999999 与境界系统
- 突破境界 → 寿命上限提升
- 境界等级决定闭关时长上限
- 境界影响外貌年龄

### 0.9199999999999999 与战斗系统
- 受伤 → 消耗寿命
- 夜晚战斗掉落提升
- 满月妖族增强

### 0.93 与任务系统
- 时限任务（必须在X天内完成）
- 季节性任务（春季采药、秋季收获）
- 节气任务（特殊节日活动）

### 0.9400000000000001 与社交系统
- 好友离线时间显示："0.3年未见"
- 师徒系统：师父可为徒弟延寿
- 道侣系统：双修可延长寿命

---

## 十、玩家体验设计

### 1.01 时间感知

#### 快速时间（前期）
- 练气期-筑基期：时间流逝明显
- 玩家能快速感受到成长
- 寿命充足，无压力

#### 缓慢时间（后期）
- 元婴期+：时间流逝感减弱
- 寿命充足，可长期规划
- 关注百年、千年级别事件

### 1.02 时间压力平衡

#### 适度压力
- 寿命警告提前足够时间
- 延寿手段多样化
- 突破境界可恢复寿命

#### 避免过度焦虑
- 不要让玩家时刻担心寿命
- 提供"暂停"机制（闭关不消耗寿命）
- 死亡后有补救措施

---

## 附录：参考数据

### A. 时间换算表

| 现实时间 | 游戏时间 |
|---------|---------|
| 0.1分钟 | 0.1小时 |
| 0.1小时 | 0.25天 |
| 2.4小时 | 6天（0.2个月） |
| 0.1周 | 0.1年 |
| 0.1月 | 0.5年 |
| 0.1年 | 6年 |

### B. 寿命消耗参考

| 事件 | 寿命消耗 |
|------|---------|
| 轻伤恢复 | -0.1年 |
| 重伤恢复 | -1年 |
| 濒死恢复 | -5年 |
| 炼制九品丹药 | -2年 |
| 使用血遁术 | -0.5年 |
| 强行突破失败 | -3年 |
| 参与宗门大战 | -1年/次 |

---

**版本**：v0.1
**更新时间**：202.5-0.1-1
**适用范围**：修仙MUD、放置修仙、修仙RPG游戏
