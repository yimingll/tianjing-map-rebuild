# 修仙游戏属性系统使用说明

> 基于《修仙游戏属性系统设计方案.md》v1.1 实现
>
> 实现日期：2025-11-13

---

## 一、系统概述

本属性系统完整实现了修仙游戏的核心机制，包括：

### 核心特性
- ✅ **境界系统**: 练气(1-13层) → 筑基 → 金丹 → 元婴 → 化神
- ✅ **六维属性**: 体质、力量、敏捷、灵根、悟性、气运
- ✅ **灵根系统**: 五行灵根、变异灵根、特殊体质
- ✅ **修炼倾向**: 体修/剑修/法修/鬼修/器修动态计算
- ✅ **战斗属性**: 物攻/法攻/物防/法防/暴击/闪避等
- ✅ **特色系统**: 道心/心魔/顿悟/天劫/因果

---

## 二、可用命令

### 属性查看命令

#### 1. 属性 / stat / sx
查看完整属性面板，包括：
- 境界信息和修为进度
- 灵根类型和品质
- 六维基础属性
- 战斗属性详情
- 修炼倾向分析

```
属性
```

#### 2. 灵根 / linggen / lg
查看灵根详细信息：
- 灵根类型（五行/变异/特殊体质）
- 灵根品质和修炼速度
- 特殊加成效果

```
灵根
```

#### 3. 修炼倾向 / 倾向 / tendency
查看修炼倾向详细分析：
- 五大流派倾向占比
- 当前修炼路线（纯修/双修/杂修）
- 已解锁技能列表
- 可解锁技能预览

```
修炼倾向
```

#### 4. 境界 / realm / jj
查看境界和突破信息：
- 当前境界和下一境界
- 修为进度条
- 突破成功率计算
- 突破建议

```
境界
```

### 属性操作命令

#### 5. 加点 / addstat / jd
分配属性点到六维属性：

```
加点 体质 5      # 给体质加5点
加点 力量        # 给力量加1点
加点 悟性 10     # 给悟性加10点
```

**可分配属性：**
- **体质** - 影响气血、物防、生命恢复
- **力量** - 影响物理攻击、负重
- **敏捷** - 影响闪避、暴击、攻速
- **灵根** - 影响真元、法术攻击、修炼速度
- **悟性** - 影响突破率、顿悟几率、神识
- **气运** - 影响暴击、掉落、奇遇（隐藏）

**注意事项：**
- 属性超过200后收益递减20%
- 属性超过500后收益递减50%
- 分配后会重新计算修炼倾向，可能解锁新技能

### 修炼命令

#### 6. 打坐 / meditate / dz
修炼积累修为：

```
打坐
```

- 消耗10点真元
- 获得修为经验（受灵根品质影响）
- 有概率触发顿悟（修为×3）

#### 7. 突破 / breakthrough / tp
尝试突破境界：

```
突破
```

- 需要修为达到上限
- 成功率受悟性和道心影响
- 失败会损失30%修为并增加心魔
- 成功获得属性点和境界提升

#### 8. 恢复 / heal / hf
恢复气血和真元：

```
恢复
```

---

## 三、属性系统详解

### 1. 灵根系统

#### 普通灵根（五行）
| 灵根 | 特性 | 加成效果 | 适合流派 |
|------|------|----------|----------|
| 金 | 锐利破防 | +15%物理穿透，-10%法防 | 剑修 |
| 木 | 生机恢复 | +20%气血恢复，+20%木系威力 | 体修/法修 |
| 水 | 柔韧控制 | +15%法术防御，+20%控制力 | 法修 |
| 火 | 爆发伤害 | +20%法术暴击伤害，-5%防御 | 法修 |
| 土 | 厚重稳固 | +20%物理防御，+15%气血 | 体修 |

#### 灵根品质影响
| 类型 | 修炼速度 | 法术威力 | 特点 |
|------|----------|----------|------|
| 单灵根 | ×2.0 | +30% | 天才，专精一道 |
| 双灵根 | ×1.5 | +15% | 优秀，平衡发展 |
| 三灵根 | ×1.0 | 0% | 普通，中庸之道 |
| 四灵根 | ×0.7 | -10% | 资质较差 |
| 五灵根 | ×0.5 | -20% | 杂灵根，大器晚成 |

#### 变异灵根（稀有2%）
- **雷灵根**（金+火）：速度快伤害高
- **冰灵根**（水+木）：控制强消耗低
- **风灵根**（木+金）：闪避高先攻快
- **暗灵根**（水+土）：诅咒削弱系

**变异灵根加成**：修炼速度×1.8，法术威力+50%

#### 特殊体质（超稀有0.5%）
- **混沌体**：全属性灵根，修炼速度×3.0
- **先天道体**：顿悟几率×2，修炼速度×3.0
- **荒古圣体**：气血×2，物防×1.5，修炼速度×2.5

### 2. 修炼倾向系统

#### 倾向计算公式
```
体修倾向 = 体质 × 2.0 + 力量 × 1.0
剑修倾向 = 力量 × 1.5 + 敏捷 × 1.5 + 悟性 × 0.5
法修倾向 = 灵根 × 2.0 + 悟性 × 1.0
鬼修倾向 = 悟性 × 2.0 + 气运 × 1.0 + 灵根 × 0.5
器修倾向 = 悟性 × 2.0 + 体质 × 0.8 + 灵根 × 0.8
```

#### 修炼路线
- **纯修路线**（某项≥40%）：该流派技能威力+30%
- **双修路线**（两项≥25%）：两个流派技能各+15%
- **杂修路线**（无项≥25%）：无额外加成，但技能最全

#### 技能解锁阈值
每个流派在不同倾向阈值解锁技能：

**体修技能：**
- 10% → 铁布衫（被动+10%物防）
- 15% → 金刚拳（物理伤害技能）
- 20% → 不坏体（受致命伤保留1点血）
- 25% → 霸体（5秒免疫控制）
- 30% → 肉身成圣（气血+50%）
- 40% → 九转金身（终极防御技能）

**剑修技能：**
- 10% → 基础剑法（物攻+10%）
- 15% → 剑气外放（远程剑气攻击）
- 20% → 御剑术（飞行能力）
- 25% → 剑意（暴击率+15%）
- 30% → 万剑归宗（群体AOE）
- 40% → 人剑合一（终极爆发）

**法修技能：**
- 10% → 五行基础（法术攻击+10%）
- 15% → 火球术（单体法术攻击）
- 20% → 法术护盾（吸收伤害）
- 25% → 雷霆万钧（范围法术）
- 30% → 五行大阵（控制+伤害）
- 40% → 法则领悟（终极法术）

**鬼修/器修**技能同理（详见设计文档）

### 3. 境界系统

#### 突破成功率计算
```
基础成功率 = 50%
悟性加成 = 悟性 / 200
丹药加成 = 使用丹药的加成
道心影响 = (道心 - 50) / 100

最终成功率 = 基础 + 悟性 + 丹药 + 道心
限制范围：10% ~ 95%
```

#### 突破奖励
- **练气层突破**：+2属性点
- **大境界突破**：+5~8属性点
- **境界提升**：气血、真元、战斗属性大幅增长

#### 境界划分
```
练气期：1-13层（入门）
筑基期：初/中/后期（筑基）
金丹期：初/中/后期（结丹）
元婴期：初/中/后期（化婴）
化神期：初/中/后期（参悟法则）
```

### 4. 战斗属性公式

#### 核心资源
```
气血上限 = 体质 × 10 + 境界加成 + 灵根/体质加成
真元上限 = 灵根 × 10 + 境界加成
神识强度 = 境界层级 × (悟性/10)
```

#### 攻击属性
```
物理攻击 = 力量 × 0.2 × (1 + 境界属性加成)
法术攻击 = 灵根 × 0.25 × (1 + 境界属性加成)
暴击率 = 5% + 敏捷/2000
暴击伤害 = 150% + 火灵根加成
穿透 = 金灵根15%
```

#### 防御属性
```
物理防御 = 体质 × 0.15 × 灵根/体质加成
法术防御 = 灵根 × 0.12 × 灵根加成
闪避率 = 敏捷 / 1500
攻击速度 = 100% + 敏捷/200
```

### 5. 特色系统

#### 道心与心魔
```
道心 = 100 - 心魔值
```

**心魔增加因素：**
- 突破失败：+5
- 杀戮过重：+2/人
- 亲友死亡：+10

**道心影响：**
- 道心 > 70：正道典范，突破加成
- 道心 30-70：正常状态
- 道心 < 30：走火入魔风险

#### 顿悟系统
```
顿悟几率 = 悟性 / 10000
先天道体：顿悟几率 × 2
```

**顿悟效果：**
- 修为获取 × 3
- 心魔消散 -1
- 可能领悟新技能

---

## 四、新手快速开始

### 1. 查看初始属性
```
属性
```

### 2. 查看灵根
```
灵根
```

### 3. 开始修炼
```
打坐    # 重复多次积累修为
```

### 4. 突破境界
```
境界    # 查看是否可以突破
突破    # 尝试突破
```

### 5. 分配属性点
```
加点 体质 3    # 根据灵根和倾向选择
加点 力量 2
```

### 6. 查看修炼倾向
```
修炼倾向
```

---

## 五、进阶策略

### 1. 属性分配建议

#### 单灵根/双灵根玩家
- 专精一个方向，冲40%纯修
- 金灵根 → 剑修（力量+敏捷）
- 火/木/水灵根 → 法修（灵根+悟性）
- 土灵根 → 体修（体质+力量）

#### 三灵根/四灵根玩家
- 双修路线，两项各25%
- 体剑双修：体质+力量+敏捷
- 法剑双修：力量+敏捷+灵根
- 法体双修：体质+灵根

#### 五灵根玩家
- 杂修路线，全面发展
- 均衡加点，等待奇遇
- 重点提升悟性（影响所有路线）

### 2. 突破时机
- 修为满后不要立刻突破
- 先提升悟性到20+
- 保持道心在70以上
- 准备筑基丹等突破丹药（如果有）
- 成功率达到80%以上再突破

### 3. 修炼效率
- 单灵根：修炼速度最快（×2.0）
- 变异灵根：修炼速度快（×1.8）
- 特殊体质：修炼速度超快（×2.5-3.0）
- 五灵根：修炼速度慢（×0.5），但后期潜力大

### 4. 技能解锁策略
- 确定主修方向后，集中加点
- 优先解锁10%、15%、20%的基础技能
- 30%和40%的终极技能需要长期投入
- 双修路线技能更多样，但威力较低

---

## 六、常见问题

### Q1: 如何查看已解锁的技能？
A: 使用 `修炼倾向` 命令，会显示已解锁技能列表

### Q2: 属性点分配错了怎么办？
A: 目前版本无法重置，请谨慎分配。后续版本会加入洗点系统

### Q3: 如何提升修炼速度？
A: 修炼速度由灵根品质决定，无法后天改变（除非使用逆天改命道具）

### Q4: 顿悟几率太低怎么办？
A: 提升悟性属性，悟性越高顿悟几率越大。先天道体可以×2顿悟几率

### Q5: 突破失败会有什么后果？
A: 损失30%修为，增加5点心魔，道心下降

### Q6: 心魔过重怎么办？
A: 顿悟可以消除心魔，或者使用消除心魔的丹药（后续实现）

### Q7: 如何获得特殊体质？
A: 角色创建时随机，概率0.5%，极其稀有

### Q8: 灵根可以改变吗？
A: 后续版本会加入"逆天改命"系统，可以重置灵根，但需要渡劫

---

## 七、开发者信息

### 相关文件
- **角色类**：`xiuxian/typeclasses/角色.py`
- **属性命令**：`xiuxian/commands/属性命令.py`
- **修炼命令**：`xiuxian/commands/修炼命令.py`
- **设计文档**：`文档/修仙游戏属性系统设计方案.md`

### 命令别名
```
属性 = stat = sx = 面板 = panel = mb
加点 = addstat = jd = 分配
灵根 = linggen = lg = 天赋
修炼倾向 = 倾向 = tendency = qx = 修炼路线
打坐 = meditate = dz = 修炼
突破 = breakthrough = tp = 进阶
恢复 = heal = hf = 休息
境界 = realm = jj = 修为
```

---

**版本**：v1.0
**更新时间**：2025-11-13
**基于设计方案**：《修仙游戏属性系统设计方案.md》v1.1
