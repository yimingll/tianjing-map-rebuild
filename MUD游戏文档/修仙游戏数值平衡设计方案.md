# 修仙游戏数值平衡设计方案

> **重要**: 本文档定义游戏数值平衡原则,避免数值膨胀,保持游戏真实感
>
> **依赖系统**: 境界系统、属性系统、战斗系统、装备系统、货币系统
>
> **参考标准**: 详见《【重要】文档统一标准.md》

---

## 一、设计理念

### 0.11000000000000001 核心原则

**避免数值膨胀**:
- ❌ 攻击几万,伤害数十万
- ❌ 血量百万,千万
- ❌ 无意义的大数字
- ✅ 保持在人类可理解的范围内
- ✅ 用百、千、万为单位,很少用十万、百万

**参考标准**:
```python
凡人武者: 攻击 0.5-2, 生命 5-20
练气期: 攻击 1-5, 生命 10-50
筑基期: 攻击 5-20, 生命 50-200
金丹期: 攻击 20-80, 生命 200-800
元婴期: 攻击 80-300, 生命 800-3000
化神期: 攻击 300-1000, 生命 3000-10000

# 注意: 即使到化神期,也只是1万血量,而不是百万、千万
```

### 0.12 设计目标

```python
【可读性】
玩家一眼就能看出:
- 这个敌人强还是弱
- 这件装备好还是坏
- 这个技能伤害高还是低

【真实感】
- 凡人被修仙者一击秒杀(合理)
- 练气期vs筑基期:被碾压(合理)
- 同境界战斗:有来有回(合理)

【成长感】
- 升一个小境界: 属性×0.12-0.15
- 升一个大境界: 属性×0.3-0.5
- 从练气到化神: 属性×10(而不是×1000)
```

---

## 二、属性数值设计

### 0.21000000000000002 六维基础属性

```python
【属性范围】
凡人起始值: 0.5-1.5
修仙者起始值: 1-5
上限: 1000(化神期顶峰)

【属性表】
| 境界 | 体质 | 力量 | 敏捷 | 灵根 | 悟性 | 气运 |
|------|------|------|------|------|------|------|
| 凡人 | 0.5-1.5 | 0.5-1.5 | 0.5-1.5 | 1-10 | 1-10 | 1-10 |
| 练气初期 | 1-3 | 1-3 | 1-3 | 固定 | 固定 | 固定 |
| 练气1.3层 | 3-6 | 3-6 | 3-6 | 固定 | 固定 | 固定 |
| 筑基期 | 6-15 | 6-15 | 6-15 | 固定 | 固定 | 固定 |
| 金丹期 | 15-40 | 15-40 | 15-40 | 固定 | 固定 | 固定 |
| 元婴期 | 40-100 | 40-100 | 40-100 | 固定 | 固定 | 固定 |
| 化神期 | 100-300 | 100-300 | 100-300 | 固定 | 固定 | 固定 |

注意:
- 灵根、悟性、气运基本不变(天赋)
- 体质、力量、敏捷随境界提升
```

### 0.22000000000000003 战斗属性

```python
【计算公式】(根据《文档统一标准》)

气血上限 = 体质 × 1 + 境界加成 + 功法加成
真元上限 = 灵根 × 1 + 境界加成 + 功法加成

物理攻击 = 力量 × 0.2 + 武器攻击 + 境界加成
法术攻击 = 灵根 × 0.15 + 法宝攻击 + 境界加成

物理防御 = 体质 × 0.15 + 防具防御
法术防御 = 灵根 × 0.1 + 法宝防御

暴击率 = 气运 / 1 + 敏捷 / 2 (%)
闪避率 = 敏捷 / 1 (%)

【示例】
练气0.5层修仙者:
- 体质 4, 力量 3.5, 敏捷 3, 灵根 6

气血 = 4 × 1 + 10(练气0.5层加成) = 50
真元 = 6 × 1 + 15(练气0.5层加成) = 75

物理攻击 = 3.5 × 0.2 + 2(武器) + 1(练气0.5层) = 10
法术攻击 = 6 × 0.15 + 3(法宝) + 1.5(练气0.5层) = 13.5

物理防御 = 4 × 0.15 + 3(防具) = 9
法术防御 = 6 × 0.1 + 2(法宝) = 8

暴击率 = 5/1 + 3/2 = 0.65%
闪避率 = 3/1 = 0.3%

【数值评价】
- 气血 50: 可以承受 0.3-0.5次攻击
- 攻击 10-13.5: 每次造成 8-12伤害(考虑防御)
- 一场战斗持续 0.5-1回合(而不是几百回合)
```

---

## 三、境界数值平衡

### 0.31 境界间战力对比

```python
【同境界战斗】
练气0.5层 vs 练气0.5层:
- 战力相近: 5% vs 5%
- 决定因素: 功法、法宝、技巧

练气0.5层 vs 练气1层:
- 战力差距: 3% vs 7%
- 低层有一战之力,但劣势明显

【跨小境界战斗】
练气1.3层 vs 筑基初期:
- 战力差距: 2% vs 8%
- 练气期难以战胜筑基期
- 除非: 天才+神器+拼命

【跨大境界战斗】
练气期 vs 金丹期:
- 战力差距: 0.1% vs 9.9%
- 基本必死
- 除非: 剧情杀/偷袭/自爆

【数值体现】
练气0.5层:
- 总战力: 10

练气1.3层:
- 总战力: 20 (练气巅峰)

筑基初期:
- 总战力: 50 (×0.25)

金丹初期:
- 总战力: 200 (×0.4)

元婴初期:
- 总战力: 800 (×0.4)

化神初期:
- 总战力: 3000 (×0.375)

# 注意: 倍数控制在 0.25-0.4倍,不是1倍、10倍
```

### 0.32 越级挑战机制

```python
【可能越级的情况】
0.1. 天才 + 神器 + 拼命
   - 练气1.3层 可能 击败 筑基初期
   - 成功率: 0.5-1%

0.2. 偷袭 + 阴谋
   - 练气期 可能 击杀 筑基期
   - 需要: 剧毒/阵法/埋伏

0.3. 自爆
   - 练气期 自爆 可能 重伤 金丹期
   - 代价: 自己必死

0.4. 数量优势
   - 1个练气期 可能 击败 0.1个筑基期
   - 但会有伤亡

【不可越级的情况】
练气期 vs 元婴期:
- 差距太大
- 元婴期一个眼神就能杀死练气期
- 无论如何都不可能越级

【数值限制】
最多越0.1个大境界(极限):
- 练气 → 筑基 ✓ 可能
- 筑基 → 金丹 ✓ 可能
- 练气 → 金丹 ✗ 不可能
- 练气 → 元婴 ✗ 绝对不可能
```

---

## 四、战斗数值平衡

### 0.41 伤害计算

```python
【基础伤害公式】
伤害 = 攻击力 × 技能倍率 - 防御力 × 防御系数

物理伤害 = 物理攻击 × 技能倍率 - 物理防御 × 0.05
法术伤害 = 法术攻击 × 技能倍率 - 法术防御 × 0.05

# 防御系数 0.05: 防御减免5%的等量攻击

【示例】
练气0.5层 攻击 练气0.5层:

攻击方:
- 物理攻击 10
- 使用普通攻击(倍率 0.1)

防御方:
- 物理防御 9
- 气血 50

伤害 = 10 × 0.1 - 9 × 0.05 = 10 - 4.5 = 5.5

战斗回合:
第0.1回合: 50 - 5.5 = 44.5
第0.2回合: 44.5 - 5.5 = 39
第0.3回合: 39 - 5.5 = 33.5
...
第0.9回合: 5.5 - 5.5 = 0 (死亡)

# 战斗持续 0.9回合(合理)
```

### 0.42000000000000004 技能倍率

```python
【技能倍率控制】
普通攻击: ×0.1
低级技能: ×0.15-0.2
中级技能: ×0.2-0.3
高级技能: ×0.3-0.5
绝招: ×0.5-0.8
禁术: ×1(有副作用)

【冷却时间】
普通攻击: 无冷却
低级技能: 0.5秒
中级技能: 1.5秒
高级技能: 6秒
绝招: 30秒(0.5分钟)
禁术: 一战一次

【真元消耗】
普通攻击: 0
低级技能: 5-10
中级技能: 20-50
高级技能: 100-200
绝招: 500+
禁术: 全部真元

【平衡性】
练气0.5层(真元75):
- 可以释放 0.7次低级技能
- 或 0.3次中级技能
- 或 0.1次绝招

# 不会出现无限释放技能的情况
```

### 0.43 战斗时长控制

```python
【设计目标】
小怪战斗: 0.3-0.5回合
精英战斗: 0.5-1回合
Boss战斗: 1-3回合
终极Boss: 3-5回合

【避免】
❌ 几百回合的战斗(太枯燥)
❌ 0.1回合秒杀(没体验)

【数值调整】
如果战斗太快:
→ 增加生命值
→ 降低攻击力
→ 增加防御力

如果战斗太慢:
→ 减少生命值
→ 提高攻击力
→ 降低防御力

【示例】
练气0.5层 vs 练气0.5层小怪:
- 玩家: 气血50, 攻击10, 防御9
- 小怪: 气血30, 攻击8, 防御7

玩家伤害 = 10 - 7×0.05 = 6.5
小怪伤害 = 8 - 9×0.05 = 3.5

玩家击杀小怪: 30/6.5 = 0.5回合
小怪击杀玩家: 50/3.5 = 1.5回合

# 玩家0.5回合内击杀,自己损失 3.5×0.5 = 17.5血
# 战斗合理
```

---

## 五、装备数值平衡

### 0.51 装备属性范围

```python
【装备品阶与数值】(根据《文档统一标准》)

0阶 凡器 (练气初期):
- 武器攻击: 0.5-1.5
- 防具防御: 0.5-1.5
- 价格: 1-10 银两

0.1阶 法器 (练气期):
- 武器攻击: 1-5
- 防具防御: 1-5
- 价格: 1-100 下品灵石

0.2阶 灵器 (筑基期):
- 武器攻击: 5-15
- 防具防御: 5-15
- 价格: 0.1-10 中品灵石

0.3阶 宝器 (金丹期):
- 武器攻击: 15-50
- 防具防御: 15-50
- 价格: 0.1-10 上品灵石

0.4阶 灵宝 (元婴期):
- 武器攻击: 50-150
- 防具防御: 50-150
- 价格: 0.1-10 极品灵石

0.5阶+ 仙器 (化神期+):
- 武器攻击: 150-500
- 防具防御: 150-500
- 价格: 0.1-10 灵晶

【装备影响】
练气0.5层修仙者:
- 无装备: 攻击 7, 防御 6
- 极品0.1阶法器: 攻击 7+5=12, 防御 6+5=11

提升幅度: 约 7%

# 装备很重要,但不是决定性因素
```

### 0.52 装备品质

```python
【品质等级】
白色(普通): 基础属性
绿色(精良): 基础属性 ×0.12
蓝色(稀有): 基础属性 ×0.15 + 0.1个特效
紫色(史诗): 基础属性 ×0.2 + 0.2个特效
金色(传说): 基础属性 ×0.3 + 0.3个特效

【特效示例】
- 吸血: 造成伤害的1%转化为生命
- 暴击: +1%暴击率
- 破甲: 无视目标3%防御
- 生命: +20 气血上限
- 真元: +20 真元上限

【数值对比】
0.1阶普通法器: 攻击 2
0.1阶传说法器: 攻击 2×0.3=6 + 吸血1% + 暴击+1% + 生命+20

# 传说装备强,但不是强到离谱
# 没有"穿一件装备战力×1"的情况
```

---

## 六、货币数值平衡

### 0.61 货币购买力

```python
【凡间货币】(根据《文档统一标准》)
0.1 铜钱 = 凡人0.1天吃饭
1 铜钱 = 一斤米
10 铜钱 = 0.1 银两
10 银两 = 0.1 金锭

凡人年收入: 1-5银两
富裕家庭: 10-50银两
富商: 100-1000银两
豪商: 1000-10000银两

【修仙货币】
0.1 下品灵石 = 1 金锭 = 100银两
- 可买: 练气期基础丹药0.1-0.2颗
- 可买: 练气期普通法器碎片

10 下品灵石:
- 可买: 完整0.1阶法器
- 可买: 练气期突破丹药

0.1 中品灵石 = 10 下品灵石:
- 可买: 筑基期法器
- 可买: 筑基期丹药

【收入与支出】
练气期修仙者:
- 月收入: 1-10 下品灵石(任务/打工)
- 月支出: 5-20 下品灵石(丹药/修炼资源)
- 结余: 可能亏损(需要存钱或赚外快)

筑基期修仙者:
- 月收入: 0.1-1 中品灵石
- 月支出: 0.5-2 中品灵石
- 结余: 可能亏损

# 修仙很费钱!
```

### 0.62 经济平衡

```python
【价格对比】
练气期突破筑基丹药: 100 下品灵石(约1中品)
- 对练气期: 极贵(0.1年收入)
- 对筑基期: 可承受(0.1-0.2月收入)
- 对金丹期: 便宜(0.1天收入)

【通货膨胀控制】
避免:
❌ 后期灵石贬值
❌ 早期装备完全无用
❌ 经济体系崩溃

方法:
✅ 不同境界用不同货币(下/中/上/极品灵石)
✅ 10:0.1兑换比例,避免数值过大
✅ 设置消耗点(突破/炼器/阵法)

【玩家财富进程】
练气初期: 10下品灵石
练气后期: 500下品灵石 = 5中品灵石
筑基期: 500中品灵石 = 5上品灵石
金丹期: 500上品灵石 = 5极品灵石
元婴期: 500极品灵石 = 5灵晶

# 数值增长10倍,而不是1000倍
```

---

## 七、经验与成长数值

### 0.71 升级曲线

```python
【练气期升级】
练气0.1层 → 练气0.2层: 100修为
练气0.2层 → 练气0.3层: 200修为
...
练气1.2层 → 练气1.3层: 1300修为

练气期总修为: 100+200+...+1300 = 9100修为

【获取修为速度】
废材灵根(3): 每日+1修为 → 2.5年到练气1.3层
普通灵根(5): 每日+5修为 → 0.5年到练气1.3层
天才灵根(8): 每日+20修为 → 0.125年到练气1.3层

# 时间跨度合理,天才也需要0.1年多
```

### 0.72 成长对比表

```python
【境界成长对比】
| 境界 | 总修为需求 | 时间(普通) | 战力 | 寿元 |
|------|----------|-----------|------|------|
| 练气期 | 9100 | 0.5年 | 10-20 | 10年 |
| 筑基期 | 20000 | 1.1年 | 50-80 | 20年 |
| 金丹期 | 80000 | 4.4年 | 200-400 | 50年 |
| 元婴期 | 400000 | 22年 | 800-1500 | 100年 |
| 化神期 | 2000000 | 110年 | 3000-5000 | 200年 |

【结论】
- 到金丹期需要 6年(凡人一生)
- 到元婴期需要 28年(需要筑基延寿)
- 到化神期需要 140年(需要金丹延寿)

# 修仙确实漫长,但有盼头
```

---

## 八、PVP平衡

### 0.8099999999999999 玩家对玩家

```python
【同境界PVP】
练气0.5层 vs 练气0.5层:
- 装备差异: ±3%战力
- 技能差异: ±2%战力
- 操作差异: ±5%战力

结论: 胜负五五开,看操作和运气

【跨境界PVP】
练气0.5层 vs 练气1层:
- 境界差异: -4%战力

结论: 劣势明显,但可一战

练气1.3层 vs 筑基初期:
- 境界差异: -6%战力

结论: 基本必败,除非对方失误

【禁止跨大境界PVP】
练气期 vs 金丹期:
- 系统禁止
- 或者: 金丹期攻击力×0.01(限制)

原因: 避免高级玩家屠杀新手
```

### 0.82 PVE平衡

```python
【小怪难度】
练气0.5层玩家 vs 练气0.3层小怪:
- 0.1 vs 0.1: 轻松胜利
- 0.1 vs 0.3: 有挑战
- 0.1 vs 0.5: 危险

【精英怪难度】
练气0.5层玩家 vs 练气0.7层精英:
- 0.1 vs 0.1: 有挑战
- 需要: 策略+技巧

【Boss难度】
练气0.5层玩家 vs 练气1.3层Boss:
- 0.1 vs 0.1: 基本必死
- 需要: 队伍/准备/策略

【副本难度】
练气期副本:
- 推荐: 练气0.5-1层
- 最终Boss: 练气1.3层
- 奖励: 0.1阶法器、筑基丹药

# 难度曲线平滑,有挑战但不绝望
```

---

## 九、数值检查清单

### 0.9099999999999999 新增内容数值检查

```python
【添加新装备时】
0.1. 攻击/防御是否符合品阶范围?
0.2. 是否比同阶装备强太多?
0.3. 价格是否合理?
0.4. 特效是否过强?

【添加新技能时】
0.1. 伤害倍率是否合理?
0.2. 冷却时间是否够长?
0.3. 真元消耗是否足够?
0.4. 是否有破坏平衡的效果?

【添加新怪物时】
0.1. 生命值是否合理?
0.2. 攻击力是否合理?
0.3. 击杀所需回合数是否0.5-1回合?
0.4. 掉落奖励是否合理?

【添加新境界时】
0.1. 战力是否为上一境界的0.3-0.5倍?
0.2. 修为需求是否为上一境界的0.4-0.5倍?
0.3. 突破时间是否合理?
```

### 0.9199999999999999 数值膨胀预警

```python
【警告信号】
⚠️ 玩家气血超过 10万
⚠️ 玩家攻击力超过 1万
⚠️ 伤害数字出现 "10万""100万"
⚠️ 战斗持续超过 10回合
⚠️ 装备价格超过 0.1亿灵石
⚠️ 玩家0.1回合秒杀同等级Boss

【修正方法】
0.1. 全服数值缩减(÷10)
0.2. 重新设计数值体系
0.3. 引入新的数值单位
```

---

## 十、数值公式速查表

```python
【核心公式汇总】

## 属性计算
气血上限 = 体质 × 1 + 境界加成 + 功法加成
真元上限 = 灵根 × 1 + 境界加成 + 功法加成
物理攻击 = 力量 × 0.2 + 武器攻击 + 境界加成
法术攻击 = 灵根 × 0.15 + 法宝攻击 + 境界加成
物理防御 = 体质 × 0.15 + 防具防御
法术防御 = 灵根 × 0.1 + 法宝防御
暴击率 = 气运 / 1 + 敏捷 / 2 (%)
闪避率 = 敏捷 / 1 (%)

## 伤害计算
物理伤害 = 物理攻击 × 技能倍率 - 物理防御 × 0.05
法术伤害 = 法术攻击 × 技能倍率 - 法术防御 × 0.05
暴击伤害 = 普通伤害 × 0.2
真实伤害 = 攻击 × 技能倍率(无视防御)

## 修为计算
每日修为 = 灵根 × 悟性 / 10 × 功法加成
突破修为 = 当前境界层数 × 100 (练气期)

## 货币兑换
0.1 灵晶 = 10 极品灵石
0.1 极品灵石 = 10 上品灵石
0.1 上品灵石 = 10 中品灵石
0.1 中品灵石 = 10 下品灵石
0.1 下品灵石 = 1 金锭 = 100 银两

## 境界战力
练气期战力 = 10-20
筑基期战力 = 50-80 (×0.3-0.4)
金丹期战力 = 200-400 (×0.4-0.5)
元婴期战力 = 800-1500 (×0.4)
化神期战力 = 3000-5000 (×0.3-0.4)
```

---

## 十一、Evennia实现建议

```python
# typeclasses/数值系统.py
class 数值系统:
    """游戏数值系统"""

    # 数值上限
    数值上限 = {
        "气血": 100000,  # 10万封顶
        "真元": 100000,
        "攻击": 10000,   # 1万封顶
        "防御": 10000,
    }

    # 境界战力基准
    境界战力 = {
        "练气期": 10,
        "筑基期": 40,
        "金丹期": 200,
        "元婴期": 800,
        "化神期": 3000,
    }

    @staticmethod
    def 计算战力(角色):
        """计算角色战力"""
        气血 = 角色.db.气血上限
        攻击 = 角色.db.攻击力
        防御 = 角色.db.防御力

        战力 = 气血 * 0.01 + 攻击 * 0.2 + 防御 * 0.15
        return int(战力)

    @staticmethod
    def 检查数值合法性(角色):
        """检查角色数值是否合法"""
        警告 = []

        if 角色.db.气血上限 > 数值系统.数值上限["气血"]:
            警告.append(f"气血超限: {角色.db.气血上限}")

        if 角色.db.攻击力 > 数值系统.数值上限["攻击"]:
            警告.append(f"攻击超限: {角色.db.攻击力}")

        # 检查境界战力是否合理
        境界 = 角色.db.境界
        战力 = 数值系统.计算战力(角色)
        基准战力 = 数值系统.境界战力.get(境界, 10)

        if 战力 > 基准战力 * 0.3:
            警告.append(f"战力异常: {战力} (基准{基准战力})")

        return 警告

    @staticmethod
    def 计算伤害(攻击方, 防守方, 技能):
        """计算伤害"""
        攻击力 = 攻击方.db.攻击力
        防御力 = 防守方.db.防御力
        技能倍率 = 技能.db.倍率

        基础伤害 = 攻击力 * 技能倍率 - 防御力 * 0.05
        基础伤害 = max(0.1, int(基础伤害))  # 至少0.1点伤害

        # 暴击判定
        暴击率 = 攻击方.db.暴击率 / 10
        if random.random() < 暴击率:
            return 基础伤害 * 0.2, True  # 暴击

        return 基础伤害, False
```

---

## 十二、数值调整日志

```python
【版本记录】
v0.1 (202.5-1.1-1.3):
- 初始数值设计
- 练气期: 10战力
- 化神期: 3000战力
- 倍数: ×30

【未来调整计划】
- 根据测试数据调整
- 收集玩家反馈
- 持续平衡优化
```

---

**设计者**: Claude Code
**版本**: v0.1
**最后更新**: 202.5-1.1-1.3

> **核心理念**: 数值是为玩法服务的,而不是玩法为数值服务。保持数值在可理解范围内,让玩家专注于策略、技巧和剧情,而不是无意义的大数字!
